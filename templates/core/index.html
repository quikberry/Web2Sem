{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Kinoafisha ‚Äî –ì–ª–∞–≤–Ω–∞—è</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="{% static 'core/style.css' %}">
</head>
<body class="bg-light">

<div class="container mt-5">

    <h1 class="mb-4 text-center">üé¨ Kinoafisha</h1>

    <!-- üìÖ –í–∏–¥–∂–µ—Ç 1: –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Ä–µ–ª–∏–∑–æ–≤ -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header d-flex justify-content-between align-items-center">
            <strong>–°–∫–æ—Ä–æ –≤ –∫–∏–Ω–æ</strong>
            <a href="#" class="text-decoration-none">–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Ä–µ–ª–∏–∑–æ–≤ ‚Üí</a>
        </div>
        <ul class="list-group list-group-flush">
            {% for movie in upcoming_movies %}
            <li class="list-group-item d-flex align-items-center">
                {% if movie.poster %}
                    <img src="{{ movie.poster.url }}" class="poster-thumb me-3" alt="–ü–æ—Å—Ç–µ—Ä">
                {% endif %}
                <div class="flex-grow-1">
                    <div class="fw-bold">{{ movie.title }}</div>
                    <div class="text-muted small">{{ movie.description|truncatewords:8 }}</div>
                </div>
                <div class="text-center me-4">
                    <span class="fw-bold">{{ movie.created_at|date:"d" }}</span><br>
                    <small>{{ movie.created_at|date:"F" }}</small>
                </div>
                <button class="btn btn-outline-secondary btn-sm" title="–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ">‚òÜ</button>
            </li>
            {% empty %}
            <li class="list-group-item">–ù–µ—Ç –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Ä–µ–ª–∏–∑–æ–≤.</li>
            {% endfor %}
        </ul>
    </div>

    <!-- üéü –í–∏–¥–∂–µ—Ç 2: –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–∏–ª—å–º—ã –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–µ–∞–Ω—Å–æ–≤ -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header"><strong>–¢–æ–ø —Ñ–∏–ª—å–º–æ–≤ –ø–æ —á–∏—Å–ª—É —Å–µ–∞–Ω—Å–æ–≤</strong></div>
        <ul class="list-group list-group-flush">
            {% for movie in popular_by_sessions %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>{{ forloop.counter }}. <a href="#">{{ movie.title }}</a></span>
                <span class="badge bg-primary rounded-pill">{{ movie.session_count }} —Å–µ–∞–Ω—Å–æ–≤</span>
            </li>
            {% empty %}
            <li class="list-group-item">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö.</li>
            {% endfor %}
        </ul>
    </div>

    <!-- üåü –í–∏–¥–∂–µ—Ç 3: –õ—É—á—à–∏–µ –ø–æ –æ—Ü–µ–Ω–∫–∞–º -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header"><strong>–õ—É—á—à–∏–µ —Ñ–∏–ª—å–º—ã –ø–æ –æ—Ü–µ–Ω–∫–µ</strong></div>
        <ul class="list-group list-group-flush">
            {% for movie in top_rated %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>{{ forloop.counter }}. <a href="#">{{ movie.title }}</a></span>
                <span class="badge bg-success rounded-pill">{{ movie.avg_rating|floatformat:1 }}/10</span>
            </li>
            {% empty %}
            <li class="list-group-item">–ù–µ—Ç –æ—Ç–∑—ã–≤–æ–≤.</li>
            {% endfor %}
        </ul>
    </div>

</div>

</body>
</html>